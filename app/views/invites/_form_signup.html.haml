- content_for :head do
  = stylesheet_link_tag "invites"
  = javascript_include_tag "forms"
  = javascript_include_tag "invites"

.row#invite_instructions
  = t('invites.form.title.enter_invite_info')

- if @user.errors.any? || @invite.errors.any?
  #error_explanation
    %h2= "#{pluralize(@invite.errors.count + @user.errors.count, "error")} prohibited this invitation from being saved:"
    %ul
      -@user.errors.full_messages.each do |msg| 
        %li= msg 
      -@invite.errors.full_messages.each do |msg| 
        %li= msg 

%br/
%br/
/ form
= form_for(@user, url: { action: :respond_signup }, html: {:class => 'form-horizontal', :id => 'invite_signup'}) do |f| 

  / header - account info
  .row
    .span1
    .span5
      %h3= t('terms.account_information')

  / program name
  .control-group
    .span1
    .span3.form-label
      = label_tag(:program, t('terms.program'), :class => 'control-label')
    .span6.form-value
      %span.form-value
        = @referenced_invite.program.name

  / email
  .control-group{:class => @user.errors.messages[:email].nil? ? "" : "error"}
    .span1
    .span3.form-label
      = f.label(:email, t('terms.email'), :class => 'control-label')
    .span6.form-value
      %span.form-value
        - email_value = @user.email.blank? ? ConstantsHelper::INVITE_DEFAULT_EMAIL : @user.email
        = email_value
        = f.hidden_field(:email, :value => email_value)

  / password
  .control-group{:class => @user.errors.messages[:password].nil? ? "" : "error"}
    .span1
    .span3.form-label= f.label(:password, t('terms.password'), :class => 'control-label')
    .span6
      %span
        - password_value = @user.password.blank? ? "" : @user.password
        = f.password_field(:password, :value => password_value)


  / password_confirmation
  .control-group{:class => @user.errors.messages[:password_confirmation].nil? ? "" : "error"}
    .span1
    .span3.form-label
      = f.label(:password_confirmation, t('terms.password_confirmation'), :class => 'control-label')
    .span6
      %span
        - password_confirmation = @user.password_confirmation.blank? ? "" : @user.password_confirmation
        = f.password_field(:password_confirmation, :value => password_value)

  / student id
  - if(@referenced_invite.is_for_student?)
    .control-group{:class => @user.errors.messages[:student_id].nil? ? "" : "error"}
      .span1
      .span3.form-label
        = label_tag(:email, t('terms.student_id'), :class => 'control-label')
      .span6
        %span
          - invite_student_id = @invite.student_id.blank? ? ConstantsHelper::INVITE_DEFAULT_STUDENT_ID : @invite.student_id
          = text_field_tag(:invite_student_id, invite_student_id)

  / invite code
  - invite_code = @invite.code.blank? ? ConstantsHelper::INVITE_DEFAULT_CODE : @invite.code
  = hidden_field_tag(:invite_code, invite_code)
  = hidden_field_tag(:invite_id, @referenced_invite.slug)

  %br/
  %br/
  / action
  .row
    .span4
    .span1
      = f.submit(t('terms.reject_invite'), :class => 'btn btn-danger', :name => 'reject') 
    .span2
    .span1
      = f.submit(t('terms.accept_invite'), :class => 'btn btn-success') 
    .span3
