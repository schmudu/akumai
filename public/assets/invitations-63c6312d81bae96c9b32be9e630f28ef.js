function enableAllUserLevels(){$(".admin").removeClass("disabled"),$("#radio_admin").attr("disabled",!1),$(".staff").removeClass("disabled"),$("#radio_staff").attr("disabled",!1),$(".student").removeClass("disabled"),$("#radio_student").attr("disabled",!1)}function enableOnlyStudent(){uncheckRadioButton("input.admin"),uncheckRadioButton("input.staff"),$(".admin").addClass("disabled"),$("#radio_admin").attr("disabled",!0),$(".staff").addClass("disabled"),$("#radio_staff").attr("disabled",!0),$(".student").removeClass("disabled"),$("#radio_student").attr("disabled",!1)}function disableAllUserLevels(){uncheckRadioButton("input.admin"),uncheckRadioButton("input.staff"),uncheckRadioButton("input.student"),$(".admin").addClass("disabled"),$("#radio_admin").attr("disabled",!0),$(".staff").addClass("disabled"),$("#radio_staff").attr("disabled",!0),$(".student").addClass("disabled"),$("#radio_student").attr("disabled",!0)}function setInvitationLevel(t){$.get("/program_user_level.json",{program:t}).done(function(t){var e=t.level;e==LEVEL_ROLE_SUPERUSER?enableAllUserLevels():e==LEVEL_ROLE_ADMIN?enableAllUserLevels():e==LEVEL_ROLE_STAFF?enableOnlyStudent():e==LEVEL_ROLE_STUDENT&&disableAllUserLevels()})}function insertStudentEntryRow(t,e){var n=$("<tr><td><input class='form_default_entry email_entry' id='invitation_student_entries_attributes_"+t+"_student_email' "+"name='invitation[student_entries_attributes]["+t+"][student_email]'"+"type='text' value='Student Email'> "+"</td>"+"<td>"+"<input class='form_default_entry id_entry' id='invitation_student_entries_attributes_"+t+"_student_id'"+"name='invitation[student_entries_attributes]["+t+"][student_id]'"+"type='text' value='Student ID'>"+"<input id='invitation_student_entries_attributes_"+t+"_invitation_id'"+"name='invitation[student_entries_attributes]["+t+"][invitation_id]'"+"type='hidden' value='"+e+"'>"+"</td>");$("#student_entries").append(n),$("#invitation_student_entries_attributes_"+t+"_student_email").bind("click focus",function(){setFormTextFocus("#invitation_student_entries_attributes_"+t+"_student_email",STUDENT_INVITATION_DEFAULT_EMAIL)}),$("#invitation_student_entries_attributes_"+t+"_student_email").bind("blur",function(){setFormTextBlur("#invitation_student_entries_attributes_"+t+"_student_email",STUDENT_INVITATION_DEFAULT_EMAIL)}),$("#invitation_student_entries_attributes_"+t+"_student_id").bind("click focus",function(){setFormTextFocus("#invitation_student_entries_attributes_"+t+"_student_id",STUDENT_INVITATION_DEFAULT_ID)}),$("#invitation_student_entries_attributes_"+t+"_student_id").bind("blur",function(){setFormTextBlur("#invitation_student_entries_attributes_"+t+"_student_id",STUDENT_INVITATION_DEFAULT_ID)})}$(document).ready(function(){function getHost(t){var e=document.createElement("a");return e.href=t,e.protocol+"//"+e.host}$("#program_id").change(function(){$.get("/program_user_level.json",{program:$(this).val()}).done(function(t){var e=t.level;e==LEVEL_ROLE_SUPERUSER?enableAllUserLevels():e==LEVEL_ROLE_ADMIN?enableAllUserLevels():e==LEVEL_ROLE_STAFF?enableOnlyStudent():e==LEVEL_ROLE_STUDENT&&disableAllUserLevels()})}),$(".btn-cancel").click(function(){$.get("/invite_users/cancel.json",function(){}).done(function(){var t=getHost(window.location.href),e=t+""+PATH_DASHBOARD;window.location.href=e}).fail(function(){alert("Error: U001 - Cancel button.")})}),$("#add_student_entries").click(function(){var last_entry_row=$("#student_entries tr").last(),last_entry_id=last_entry_row.children(":first").children(":first").attr("id"),string_start="attributes_",start_length=string_start.length,index_start=last_entry_id.indexOf(string_start)+start_length,string_end="_email",index_end=last_entry_id.indexOf(string_end),last_row_num=last_entry_id.substr(index_start,index_end-index_start),invitation_id=last_entry_row.children().eq(1).children().eq(1).attr("value");insertStudentEntryRow(eval(Number(last_row_num)+1),invitation_id),insertStudentEntryRow(eval(Number(last_row_num)+2),invitation_id),insertStudentEntryRow(eval(Number(last_row_num)+3),invitation_id),insertStudentEntryRow(eval(Number(last_row_num)+4),invitation_id),insertStudentEntryRow(eval(Number(last_row_num)+5),invitation_id)}),$(".btn-cancel").attr("href","#"),$(".email_entry").focus(function(){var t=$(this).val();t==STUDENT_INVITATION_DEFAULT_EMAIL&&($(this).val(""),$(this).removeClass("form_default_entry"))}),$(".email_entry").blur(function(){var t=$(this).val();t==STUDENT_INVITATION_DEFAULT_EMAIL||""===t?($(this).val(STUDENT_INVITATION_DEFAULT_EMAIL),$(this).addClass("form_default_entry")):$(this).removeClass("form_default_entry")}),$(".id_entry").focus(function(){var t=$(this).val();t===STUDENT_INVITATION_DEFAULT_ID&&($(this).val(""),$(this).removeClass("form_default_entry"))}),$(".id_entry").blur(function(){var t=$(this).val();t===STUDENT_INVITATION_DEFAULT_ID||""===t?($(this).val(STUDENT_INVITATION_DEFAULT_ID),$(this).addClass("form_default_entry")):$(this).removeClass("form_default_entry")}),$("#invitation_name").focus(function(){setFormTextFocus("#invitation_name",INVITATION_NAME_DEFAULT)}),$("#invitation_name").click(function(){setFormTextFocus("#invitation_name",INVITATION_NAME_DEFAULT)}),$("#invitation_name").blur(function(){setFormTextBlur("#invitation_name",INVITATION_NAME_DEFAULT)}),$("#invitation_recipient_emails").focus(function(){setFormTextFocus("#invitation_recipient_emails",INVITATION_DEFAULT_NON_STUDENT_EMAIL)}),$("#invitation_recipient_emails").click(function(){setFormTextFocus("#invitation_recipient_emails",INVITATION_DEFAULT_NON_STUDENT_EMAIL)}),$("#invitation_recipient_emails").blur(function(){setFormTextBlur("#invitation_recipient_emails",INVITATION_DEFAULT_NON_STUDENT_EMAIL)}),setFormTextBlur("#invitation_recipient_emails",INVITATION_DEFAULT_NON_STUDENT_EMAIL)});